# /analyze - Multi-Dimensional Analysis Command

## Purpose
Comprehensive system analysis with intelligent MCP server orchestration and specialized persona activation.

## Usage
```  
/analyze [target] [--options]
```

## Analysis Types

### Code Analysis
- `/analyze codebase --focus quality|performance|security`
- `/analyze file.js --depth shallow|deep|comprehensive`
- `/analyze architecture --scope module|system|enterprise`
- `/analyze dependencies --security --outdated`

### System Analysis
- `/analyze performance --bottlenecks --metrics`
- `/analyze security --vulnerabilities --compliance`
- `/analyze scalability --load-patterns --recommendations`
- `/analyze technical-debt --priority --impact`

### Project Analysis  
- `/analyze project --health --risks --opportunities`
- `/analyze team-workflow --efficiency --blockers`
- `/analyze requirements --gaps --conflicts`
- `/analyze timeline --realistic --dependencies`

## Intelligence Layers

### Wave Orchestration (Auto-activates: complexity â‰¥0.7)
- **Progressive Analysis**: Multi-stage deep dive with compound intelligence
- **Systematic Review**: Methodical analysis with structured validation
- **Adaptive Strategy**: Dynamic configuration based on complexity patterns
- **Enterprise Scale**: Large-scale orchestration for >100 files

### MCP Server Coordination
- **Sequential** (Primary): Complex multi-step analysis and structured reasoning
- **Context7** (Secondary): Best practices, patterns, and documentation lookup
- **Magic** (Conditional): UI analysis when frontend components detected
- **Playwright** (Performance): Metrics collection and E2E validation

### Persona Auto-Activation
- **Analyzer** (Default): Root cause specialist, evidence-based investigation
- **Architect**: System design and long-term architecture (architecture analysis)
- **Security**: Threat modeling and vulnerability assessment (security focus)
- **Performance**: Bottleneck identification and optimization (performance focus)

## Analysis Depth Levels

### Shallow (5-15 min, 5K tokens)
- Quick overview and immediate insights
- Surface-level pattern recognition
- Key metrics and obvious issues
- Actionable quick wins

### Deep (15-45 min, 15K tokens)  
- Comprehensive system understanding
- Cross-component dependency analysis
- Root cause investigation
- Strategic recommendations

### Comprehensive (45+ min, 30K+ tokens)
- Enterprise-grade analysis with wave orchestration
- Multi-domain expert coordination
- Risk assessment and mitigation strategies
- Long-term roadmap and architecture planning

## Evidence-Based Framework

### Data Collection
- **Quantitative**: Metrics, performance data, test coverage, error rates
- **Qualitative**: Code quality assessment, architectural patterns
- **Historical**: Git history, issue patterns, performance trends
- **Contextual**: Team capacity, technical constraints, business requirements

### Analysis Methodology
1. **Pattern Detection**: Automated recognition of common issues and opportunities
2. **Hypothesis Formation**: Generate testable theories about root causes
3. **Evidence Gathering**: Collect supporting data through tool orchestration
4. **Validation**: Verify findings through multiple analysis perspectives
5. **Recommendation**: Provide prioritized, actionable next steps

### Quality Validation
- **Reproducibility**: All findings must be verifiable through re-analysis
- **Completeness**: Cover all specified analysis dimensions
- **Accuracy**: Cross-validate findings across multiple data sources
- **Actionability**: Every recommendation includes implementation guidance

## Output Formats

### Executive Summary
- Key findings and immediate actions
- Risk assessment and priority matrix  
- Resource requirements and timeline
- Success metrics and validation criteria

### Technical Report
- Detailed findings with supporting evidence
- Architecture diagrams and dependency maps
- Code examples and configuration recommendations
- Testing strategies and validation approaches

### Action Plan
- Prioritized task breakdown with effort estimates
- Dependency mapping and critical path analysis
- Resource allocation and skill requirements
- Milestone planning and success criteria

## Integration Patterns

### Sub-Agent Delegation (Auto-triggers: >7 directories OR >50 files)
- **Parallel Analysis**: Multiple specialized agents analyze different system areas
- **Focus Agents**: Domain-specific analysis (security, performance, quality)
- **Aggregate Results**: Intelligent synthesis of multi-agent findings

### Quality Gates Integration
- **Validation Checkpoints**: 8-step validation cycle with AI integration  
- **Evidence Requirements**: Quantitative metrics and qualitative assessments
- **Continuous Monitoring**: Track analysis accuracy and outcome success

## Example Workflows

### Performance Analysis
```bash
/analyze performance --bottlenecks --focus backend
# Auto-activates: performance persona + Sequential + Playwright
# Output: Bottleneck identification, optimization recommendations, metrics validation
```

### Security Audit
```bash  
/analyze security --comprehensive --compliance SOC2
# Auto-activates: security persona + wave mode + Sequential + Context7
# Output: Threat model, vulnerability assessment, compliance gap analysis
```

### Architecture Review
```bash
/analyze architecture --scope system --future-state
# Auto-activates: architect persona + wave mode + Sequential + Context7
# Output: Current state assessment, future architecture recommendations, migration plan
```

## Auto-Activation Triggers
- Keywords: "analyze", "investigate", "review", "audit", "assess"
- Complex system modifications or architectural changes
- Performance issues or optimization requests
- Security concerns or compliance requirements
- Code quality or technical debt discussions
- Multi-component debugging scenarios